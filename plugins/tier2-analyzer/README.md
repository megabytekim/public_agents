# Tier 2 Analyzer Plugin

> stock-analyzer-advancedì˜ Tier 2 ì‹¬ì¸µ ë¶„ì„ í™•ì¥

## ê°œìš”

Tier 1 (`stock-analyzer-advanced`)ì˜ 1ì°¨ ìŠ¤í¬ë¦¬ë‹ í›„, **ì‹¬ì¸µ í€ë”ë©˜í„¸ ë¶„ì„**ì„ ìˆ˜í–‰í•˜ëŠ” ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ.

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIER 1 (ìŠ¤í¬ë¦¬ë‹)                        â”‚
â”‚                    plugins/stock-analyzer-advanced               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚   MI   â”‚    â”‚   SI   â”‚    â”‚   TI   â”‚    â”‚   FI   â”‚        â”‚
â”‚    â”‚ (ë‰´ìŠ¤) â”‚    â”‚(ì¢…í† ë°©)â”‚    â”‚(ê¸°ìˆ ì )â”‚    â”‚(ì—°ê°„)  â”‚        â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Tier 1 ë¶„ì„ ì™„ë£Œ í›„
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIER 2 (ì‹¬ì¸µë¶„ì„)                        â”‚
â”‚                    plugins/tier2-analyzer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚     FI+      â”‚   â”‚     SI+      â”‚   â”‚     MI+      â”‚      â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚    â”‚ âœ… êµ¬í˜„ì™„ë£Œ   â”‚   â”‚ âœ… êµ¬í˜„ì™„ë£Œ   â”‚   â”‚ ğŸ”œ ì˜ˆì •      â”‚      â”‚
â”‚    â”‚ ë¶„ê¸° ì¬ë¬´    â”‚   â”‚ í…”ë ˆê·¸ë¨     â”‚   â”‚ ê²½ì˜ì§„ í‰ê°€  â”‚      â”‚
â”‚    â”‚ + í”¼ì–´ë¹„êµ   â”‚   â”‚ ì„¼í‹°ë¨¼íŠ¸     â”‚   â”‚ + DART ê³µì‹œ  â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
tier2-analyzer/
â”œâ”€â”€ README.md
â”œâ”€â”€ .env.example              # í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ .gitignore
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ fi-plus.md            # FI+ ì—ì´ì „íŠ¸ ì •ì˜
â”‚   â””â”€â”€ si-plus.md            # SI+ ì—ì´ì „íŠ¸ ì •ì˜
â”œâ”€â”€ config/
â”‚   â””â”€â”€ telegram_channels.json # í…”ë ˆê·¸ë¨ ì±„ë„ ì„¤ì •
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py           # íŒ¨í‚¤ì§€ export
â”‚   â”œâ”€â”€ fi_plus/              # FI+ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ peer_comparison.py
â”‚   â”‚   â””â”€â”€ fnguide/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ parser.py
â”‚   â””â”€â”€ si_plus/              # SI+ ëª¨ë“ˆ
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ telegram_collector.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_fi_plus.py
â”‚   â”œâ”€â”€ test_peer_comparison.py
â”‚   â”œâ”€â”€ test_quarterly_scraper.py
â”‚   â””â”€â”€ test_telegram_collector.py
â””â”€â”€ docs/
    â”œâ”€â”€ fnguide-quarterly-structure.md
    â”œâ”€â”€ telegram-api-setup.md   # í…”ë ˆê·¸ë¨ API ì„¤ì • ê°€ì´ë“œ
    â”œâ”€â”€ logs/
    â””â”€â”€ plans/
```

---

## ì…‹ì—…

### 1. ê¸°ë³¸ ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install requests beautifulsoup4 pytest
```

### 2. SI+ í…”ë ˆê·¸ë¨ ìˆ˜ì§‘ (ì„ íƒ)

ì‹¤ì œ í…”ë ˆê·¸ë¨ ì±„ë„ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë ¤ë©´:

```bash
# Telethon ì„¤ì¹˜
pip install telethon

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ API í‚¤ ì…ë ¥
```

API í‚¤ ë°œê¸‰: [docs/telegram-api-setup.md](./docs/telegram-api-setup.md) ì°¸ì¡°

> **ì°¸ê³ **: API í‚¤ ì—†ì´ë„ ì˜¤í”„ë¼ì¸ ë¶„ì„(ìˆ˜ë™ ë©”ì‹œì§€ ì…ë ¥)ì€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

## í…ŒìŠ¤íŠ¸

```bash
cd plugins/tier2-analyzer

# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python -m pytest tests/ -v

# FI+ í…ŒìŠ¤íŠ¸ë§Œ
python -m pytest tests/test_fi_plus.py tests/test_peer_comparison.py tests/test_quarterly_scraper.py -v

# SI+ í…ŒìŠ¤íŠ¸ë§Œ
python -m pytest tests/test_telegram_collector.py -v
```

**í˜„ì¬ í…ŒìŠ¤íŠ¸ í˜„í™©**: 40ê°œ í…ŒìŠ¤íŠ¸ (FI+ 27ê°œ + SI+ 13ê°œ)

---

## FI+ ì‚¬ìš©ë²•

### ê¸°ë³¸ ì‚¬ìš©

```python
from utils.fi_plus import get_full_financials, get_peer_comparison

# ì „ì²´ ì¬ë¬´ì œí‘œ (ë‹¨ì¼ HTTP ìš”ì²­)
data = get_full_financials("005930")  # ì‚¼ì„±ì „ì

print(data["income_statement"]["annual"])   # ì—°ê°„ ì†ìµê³„ì‚°ì„œ
print(data["income_statement"]["quarterly"]) # ë¶„ê¸° ì†ìµê³„ì‚°ì„œ
print(data["balance_sheet"]["annual"])      # ì—°ê°„ ì¬ë¬´ìƒíƒœí‘œ
print(data["cash_flow"]["annual"])          # ì—°ê°„ í˜„ê¸ˆíë¦„í‘œ
print(data["ratios"])                       # ì¬ë¬´ë¹„ìœ¨ (ROE, ROA, ë¶€ì±„ë¹„ìœ¨ ë“±)
print(data["growth"])                       # ì„±ì¥ë¥  (ë§¤ì¶œ YoY, ì˜ì—…ì´ìµ YoY)

# í”¼ì–´ ë¹„êµ
peer_data = get_peer_comparison("377300", ["035420", "035720"])
print(peer_data["sector_avg"])              # ì„¹í„° í‰ê·  PER/PBR
print(peer_data["premium_discount"])        # í”„ë¦¬ë¯¸ì—„/ë””ìŠ¤ì¹´ìš´íŠ¸ (%)
```

### ê°œë³„ í•¨ìˆ˜

```python
from utils.fi_plus import (
    get_annual_income,        # ì—°ê°„ ì†ìµê³„ì‚°ì„œ
    get_quarterly_income,     # ë¶„ê¸° ì†ìµê³„ì‚°ì„œ
    get_annual_balance_sheet, # ì—°ê°„ ì¬ë¬´ìƒíƒœí‘œ
    get_annual_cash_flow,     # ì—°ê°„ í˜„ê¸ˆíë¦„í‘œ
    get_sector_average,       # ì„¹í„° í‰ê·  ê³„ì‚°
)
```

---

## SI+ ì‚¬ìš©ë²•

### ì˜¤í”„ë¼ì¸ ë¶„ì„ (API í‚¤ ë¶ˆí•„ìš”)

```python
from utils.si_plus import analyze_channel, format_sentiment_report

# ìˆ˜ë™ ìˆ˜ì§‘í•œ ë©”ì‹œì§€
messages = [
    {"text": "ì‚¼ì„±ì „ì ê¸‰ë“± ì˜ˆìƒ! ë§¤ìˆ˜ ì¶”ì²œ", "date": "2024-01-15"},
    {"text": "ëª©í‘œê°€ ìƒí–¥ ì¡°ì •", "date": "2024-01-14"},
    {"text": "ì¹´ë”ë¼ í†µì‹ ì— ì˜í•˜ë©´ í˜¸ì¬", "date": "2024-01-13"},
    {"text": "í•˜ë½ ìš°ë ¤, ì†ì ˆ ê³ ë ¤", "date": "2024-01-12"},
]

result = analyze_channel(messages, "005930")
print(format_sentiment_report(result))
```

### ê°œë³„ í•¨ìˆ˜

```python
from utils.si_plus import (
    filter_messages_by_ticker,    # ì¢…ëª© ê´€ë ¨ ë©”ì‹œì§€ í•„í„°ë§
    analyze_telegram_sentiment,   # ì„¼í‹°ë¨¼íŠ¸ ì ìˆ˜ ê³„ì‚°
    classify_message,             # ë£¨ë¨¸ vs íŒ©íŠ¸ ë¶„ë¥˜
    BULLISH_KEYWORDS,             # ìƒìŠ¹ í‚¤ì›Œë“œ ëª©ë¡
    BEARISH_KEYWORDS,             # í•˜ë½ í‚¤ì›Œë“œ ëª©ë¡
)

# ì„¼í‹°ë¨¼íŠ¸ ë¶„ì„
sentiment = analyze_telegram_sentiment(messages)
print(f"ì ìˆ˜: {sentiment['score']}")        # -1.0 ~ 1.0
print(f"ìƒìŠ¹: {sentiment['bullish_count']}")
print(f"í•˜ë½: {sentiment['bearish_count']}")

# ë£¨ë¨¸ ë¶„ë¥˜
result = classify_message("ì¹´ë”ë¼ í†µì‹ ì— ì˜í•˜ë©´ ëŒ€ë°• í˜¸ì¬")
print(f"ë£¨ë¨¸ ì—¬ë¶€: {result['is_rumor']}")    # True
print(f"ì‹ ë¢°ë„: {result['confidence']}")
```

### ì˜¨ë¼ì¸ ìˆ˜ì§‘ (API í‚¤ í•„ìš”)

```python
import asyncio
from utils.si_plus import collect_all_channels, format_sentiment_report

async def main():
    result = await collect_all_channels(
        ticker="005930",
        ticker_aliases=["ì‚¼ì„±ì „ì", "ì‚¼ì„±", "ì‚¼ì „"],
        channels=["your_channel_1", "your_channel_2"],
        limit_per_channel=100,
    )

    if result.get("combined"):
        print(format_sentiment_report(result["combined"]))

asyncio.run(main())
```

---

## ë°ì´í„° ì†ŒìŠ¤

| ë°ì´í„° | ì†ŒìŠ¤ | ë¹„ê³  |
|--------|------|------|
| ì†ìµê³„ì‚°ì„œ (ì—°ê°„/ë¶„ê¸°) | FnGuide | divSonikY, divSonikQ |
| ì¬ë¬´ìƒíƒœí‘œ (ì—°ê°„) | FnGuide | divDaechaY |
| í˜„ê¸ˆíë¦„í‘œ (ì—°ê°„) | FnGuide | divCashY |
| ë°¸ë¥˜ì—ì´ì…˜ (PER/PBR) | Naver Finance | - |
| í…”ë ˆê·¸ë¨ ì„¼í‹°ë¨¼íŠ¸ | Telegram API | Telethon |

## ì¬ë¬´ë¹„ìœ¨ ê³„ì‚°

| ë¹„ìœ¨ | ê³µì‹ |
|------|------|
| ë¶€ì±„ë¹„ìœ¨ | ë¶€ì±„ / ìë³¸ Ã— 100 |
| ìœ ë™ë¹„ìœ¨ | ìœ ë™ìì‚° / ìœ ë™ë¶€ì±„ Ã— 100 |
| ROE | ìˆœì´ìµ / ìë³¸ Ã— 100 |
| ROA | ìˆœì´ìµ / ìì‚° Ã— 100 |
| FCF | ì˜ì—…CF + íˆ¬ìCF |

## ì„¼í‹°ë¨¼íŠ¸ í‚¤ì›Œë“œ

| êµ¬ë¶„ | ì˜ˆì‹œ |
|------|------|
| ìƒìŠ¹ (Bullish) | ê¸‰ë“±, ìƒí•œê°€, ë§¤ìˆ˜, ì¶”ì²œ, ëŒíŒŒ, ì‹ ê³ ê°€, ê°€ì¦ˆì•„ |
| í•˜ë½ (Bearish) | ê¸‰ë½, í•˜í•œê°€, ì†ì ˆ, í­ë½, íˆ¬ë§¤, íƒˆì¶œ |
| ë£¨ë¨¸ ì§€í‘œ | ì¹´ë”ë¼, ì†Œë¬¸, ì°Œë¼ì‹œ, ~ì¼ë“¯, ì¶”ì • |
| íŒ©íŠ¸ ì§€í‘œ | ê³µì‹œ, IR, ë°œí‘œ, í™•ì •, ë‰´ìŠ¤ |

---

## ì—ì´ì „íŠ¸

| ì—ì´ì „íŠ¸ | ìƒíƒœ | ì—­í•  | ì†ŒìŠ¤ |
|----------|------|------|------|
| **FI+** | âœ… ì™„ë£Œ | ë¶„ê¸° ì¬ë¬´ + í”¼ì–´ ë¹„êµ | FnGuide |
| **SI+** | âœ… ì™„ë£Œ | í…”ë ˆê·¸ë¨ ì„¼í‹°ë¨¼íŠ¸ | Telethon |
| **MI+** | ğŸ”œ ì˜ˆì • | ê²½ì˜ì§„ í‰ê°€ + DART ê³µì‹œ | OpenDART API |

## ì¶œë ¥ ê²½ë¡œ

```
tier2/
â”œâ”€â”€ ì¼€ì´ì˜¥ì…˜_102370/
â”‚   â”œâ”€â”€ FI_PLUS_REPORT.md
â”‚   â””â”€â”€ SI_PLUS_REPORT.md
â”œâ”€â”€ ì¹´ì¹´ì˜¤í˜ì´_377300/
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

## ì˜ì¡´ì„±

| íŒ¨í‚¤ì§€ | ìš©ë„ | í•„ìˆ˜ |
|--------|------|------|
| requests | HTTP ìš”ì²­ | âœ… |
| beautifulsoup4 | HTML íŒŒì‹± | âœ… |
| pytest | í…ŒìŠ¤íŠ¸ | âœ… |
| telethon | í…”ë ˆê·¸ë¨ API | âŒ (SI+ ì˜¨ë¼ì¸ ìˆ˜ì§‘ ì‹œ) |

## ê´€ë ¨ ë¬¸ì„œ

- [FnGuide í…Œì´ë¸” êµ¬ì¡°](./docs/fnguide-quarterly-structure.md)
- [Telegram API ì„¤ì •](./docs/telegram-api-setup.md)
- [FI+ êµ¬í˜„ ë¡œê·¸](./docs/logs/2026-01-17-fi-plus-implementation.md)
